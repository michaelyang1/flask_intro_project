<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project Details</title>
    <link rel="stylesheet" type="text/css" href="../static/front_end.css">
  </head>
  <body>
    <div>
      <h1>Create new project:</h1>
      <form action="/create_project" method="POST">
        <label for="name">Project Name:</label>
        <input type="text" id="name" name="name"><br>

        <label for="description">Description:</label>
        <textarea id="description" name="description"></textarea><br>

        <label for="pm_email">Project Manager's Email:</label>
        <input type="email" id="pm_email" name="pm_email"><br>

        <label for="date_created">Date Created:</label>
        <input type="date" id="date_created" name="date_created"><br>

        <label for="date_completed">Date Completed:</label>
        <div>
          <input type="radio" id="tbd" name="date_completed_option" value="tbd">
          <label for="tbd" style="display: inline-block;">Not completed</label>
        </div>
        <input type="date" id="date_completed" name="date_completed"><br>

        <input type="submit" value="Create Project">
      </form>
      <h1>Modify any project fields (can skip fields you dont wish to modify)</h1>
      <form action="/modify_project" method="POST">
        <input type="hidden" id="project_id" name="project_id" value="{{
          project_id }}">

        <label for="name">Project Name:</label>
        <input type="text" id="name" name="name" value="{{ project_name }}"><br>
        <label for="description">Description:</label>
        <textarea id="description" name="description">{{ project_description }}</textarea><br>
        <label for="pm_email">Project Manager's Email:</label>
        <input type="email" id="pm_email" name="pm_email" value="{{
          project_pm_email }}"><br>

        <label for="date_created">Date Created:</label>
        <input type="date" id="date_created" name="date_created" value="{{
          project_date_created }}"><br>

        <label for="status">Status:</label>
        <select id="status" name="status">
          <option value="active" {% if project_status == 'active' %}selected{%
            endif %}>Active</option>
          <option value="inactive" {% if project_status == 'inactive'
            %}selected{% endif %}>Inactive</option>
          <option value="complete" {% if project_status == 'complete'
            %}selected{% endif %}>Complete</option>
        </select><br>

        <label for="date_completed">Date Completed:</label>
        <input type="date" id="date_completed" name="date_completed" value="{{
          project_date_completed }}"><br>

        <input type="submit" value="Modify Project">
      </form>
      <label for="project_id">Project ID:</label>
      <input type="text" id="project_id" name="project_id" />
      <button onclick="getProjectDetails()">Get Details</button>
    </div>
    <div id="project_details"></div>

    <script>
      function getProjectDetails() {
        const projectId = document.getElementById("project_id").value;
        fetch(`/project?project_id=${projectId}`, {
          method: "GET",
        })
          .then((response) => response.json())
          .then((project) => {
            const projectDetails = document.getElementById("project_details");
            projectDetails.innerHTML = `
              <h2>${project.name}</h2>
              <p>${project.description}</p>
              <p>${project.pm_email}</p>
              <p>${project.date_created}</p>
              <p>${project.status}</p>
              <p>${project.date_completed}</p>
            `;
          })
          .catch((error) => {
            console.error("Error fetching project details:", error);
            const projectDetails = document.getElementById("project_details");
            projectDetails.innerHTML = `
              <p>Project not found.</p>
            `;
          });
      }
    </script>
  </body>
</html>
